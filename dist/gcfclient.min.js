/*!
 * grapesjs-components-farmer client-side script
 * grapesjs plugin to build components for different css framework
 * 
 * @version v0.2.8
 * @author friends@niiknow.org
 * @homepage undefined
 * @repository https://github.com/niiknow/grapesjs-components-farmer.git
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("GcfClient",[],t):"object"==typeof exports?exports.GcfClient=t():e.GcfClient=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t),function(e){const n="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||void 0;t.default=class{constructor(e={}){this._name="GcfClient",this.win=e.win||n,this.opts=e,this.dom=this.win.jQuery,this.ajax=this.dom.ajax,this.doc=this.win.document||{},this.errors={stripe_client:null,stripe_server:null},this.init()}decode(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}}encode(e){try{return encodeURIComponent(e)}catch(t){return e}}isValid(e,t){return!0}queryParseString(e){e=(e||"").replace("?","").replace("#","");const t=/(\w+)\[(\d+)\]/,n=this.decode,r={};return e.split("&").forEach(e=>{const i=e.split("="),o=n(i[0]),c=t.exec(o);if(c)return r[c[1]]=r[c[1]]||[],void(r[c[1]][c[2]]=n(i[1]));r[i[0]]=n(i[1]||"")}),r||{}}initStripe(e){const t=this,n=t.opts,r=t.win.Stripe,i=n.stripeStyle,o=n.stripeSelector||"#stripeElement";if("function"==typeof r){const e=(dom(`#${o}`).data("publickey")||"").trim();e.length>2&&(t.stripe=r(e),t.elements=t.stripe.elements(),t.card=t.elements.create("card",{style:i,hidePostalCode:!0}),t.card.mount(`#${o}`),t.card.addEventListener("change",e=>{t.errors.stripe_client=null,t.errors.stripe_server=null,e.error&&($this.errors.stripe_client=e.error.message)}))}}init(){const e=this,t=e.opts,n=e.win,r=e.dom,i=t.formId,o=n.location.href.indexOf("?");if(o>0){const t=e.queryParseString(n.location.href.slice(o+1));for(let e in t)t[e]&&r(`[name="${e}"]`).val(t[e])}const c=t=>{e.ajax({type:"POST",mode:"cors",url:t.attr("action"),data:t.serialize(),done:(t,n,r)=>{e.onDone&&e.onDone(t,n,r)},fail:(t,n,r)=>{e.onFail&&e.onDone(t,n,r)},always:()=>{setTimeout(()=>{e.isSubmitting=!1},200)}})};let s=r(document.getElementsByClassName("form")[0]);i&&(s=r("#"+i)),s.on("submit",t=>{if(t.preventDefault(),e.isSubmitting)return!1;if(e.isValid(e,s)){e.isSubmitting=!0;const t=s.find('input[name="g-recaptcha-response"]');n.grecaptcha&&t.length>0?n.grecaptcha.ready(function(){n.grecaptcha.execute(t.data("sitekey"),{action:t.data("action")||s.attr("id")}).then(function(e){t.val(e),c(s)})}):c(s)}return!1}),n.Stripe&&e.initStripe(s)}}}.call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n}])});
//# sourceMappingURL=gcfclient.min.js.map