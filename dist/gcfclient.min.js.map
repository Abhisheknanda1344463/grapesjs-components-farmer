{"version":3,"sources":["webpack://GcfClient/webpack/universalModuleDefinition","webpack://GcfClient/webpack/bootstrap","webpack://GcfClient/./node_modules/@babel/runtime/helpers/typeof.js","webpack://GcfClient/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://GcfClient/./node_modules/@babel/runtime/helpers/createClass.js","webpack://GcfClient/./src/client.js","webpack://GcfClient/(webpack)/buildin/global.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_typeof2","obj","iterator","constructor","_typeof","instance","Constructor","TypeError","_defineProperties","target","props","length","descriptor","configurable","writable","protoProps","staticProps","myRoot","self","_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_2___default","global","undefined","GcfClient","opts","arguments","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default","this","_name","win","dom","jQuery","ajax","doc","document","errs","stripe_client","stripe_server","model","init","str","decodeURIComponent","replace","e","encodeURIComponent","that","form","evt","charCode","event","which","keyCode","preventDefault","response","error","isSubmitting","message","source","payload","card_brand","card","brand","card_last4","last4","card_month","card_year","pay_token","id","pay_source","JSON","stringify","server","qstr","pattern","decode","split","forEach","v","parts","exec","$inputs","setTimeout","prop","fd","type","url","attr","data","done","textStatus","jqXHR","onDone","fail","errorThrown","onFail","always","doAlways","stripe","Stripe","style","stripeStyle","elSel","stripeSelector","concat","trim","elements","hidePostalCode","mount","addEventListener","each","_","input","files","formId","iQuery","location","href","indexOf","vars","queryParseString","slice","k","val","doAjaxPost","safariQuirks","FormData","doFormSubmit","serializeArray","ownerInfo","owner","first_name","last_name","address","line1","address1","line2","address2","city","state","postal_code","postal","country","email","createSource","then","rsp","rst","handleStripeResponse","append","getElementsByClassName","on","validateAll","validatePhone","validateEmployment","isValid","phone","amount","employer","occupation","find","grecaptcha","ready","execute","action","token","initStripe","g","Function"],"mappings":"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","file":"gcfclient.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"GcfClient\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"GcfClient\"] = factory();\n\telse\n\t\troot[\"GcfClient\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","/**\n * Client-side script for form submission\n *\n * requires: jQuery - todo remove later\n */\nconst myRoot = (typeof self === 'object' && self.self === self && self) ||\n  (typeof global === 'object' && global.global === global && global) ||\n  this\n\nclass GcfClient {\n  constructor(opts = {}) {\n    this._name = 'GcfClient'\n    this.win   = opts.win || myRoot\n    this.opts  = opts\n    this.dom   = this.win.jQuery\n    this.ajax  = this.dom.ajax\n    this.doc   = this.win.document || {}\n    this.errs  = { stripe_client: null, stripe_server: null }\n    this.model = {}\n    this.init()\n  }\n\n  /**\n   * safely decode the string\n   * @param  {string} str\n   * @return {string} url decoded string\n   */\n  decode(str) {\n    try {\n      return decodeURIComponent(str.replace(/\\+/g, ' '))\n    } catch (e) {\n      return str\n    }\n  }\n\n  /**\n   * safely encode the string\n   * @param  {string} str\n   * @return {string} url encoded string\n   */\n  encode(str) {\n    try {\n      return encodeURIComponent(str);\n    } catch (e) {\n      return str;\n    }\n  }\n\n  validateAll(that, form) {\n    return true\n  }\n\n  validatePhone(that, form) {\n    return true\n  }\n\n  validateEmployment(that, form) {\n    return true\n  }\n\n  /**\n   * Numeric Input event handler\n   *\n   * @param  {Event}  evt the event\n   * @return {Boolean}     false if not number\n   */\n  preventNonNumericInput(evt) {\n    evt = evt || this.win.event\n    var charCode = (evt.which) ? evt.which : evt.keyCode\n\n    if (charCode > 31 && (charCode < 48 || charCode > 57)) {\n      if (charCode === 42) return true\n      evt.preventDefault()\n      return false\n    } else {\n      return true\n    }\n  }\n\n  stripeResponseHandler(response) {\n    if (response.error) {\n      this.isSubmitting       = false\n      this.errs.stripe_server = response.error.message\n      return false\n    }\n\n    const source  = response.source\n    const payload = {}\n\n    if (response.source) {\n      payload.card_brand = source.card.brand\n      payload.card_last4 = source.card.last4\n      payload.card_month = source.card_month\n      payload.card_year  = source.card_year\n      payload.pay_token  = source.id\n      payload.pay_source = JSON.stringify(source)\n    }\n\n    this.errs.server = null\n\n    return payload\n  }\n\n  /**\n   * helper method to parse querystring to object\n   * @param  {string} qstr the querystring\n   * @return {object}      result\n   */\n  queryParseString(qstr) {\n    qstr  = (qstr || '').replace('?', '').replace('#', '')\n\n    const pattern = /(\\w+)\\[(\\d+)\\]/\n    const decode  = this.decode,\n          obj     = {},\n          a       = qstr.split('&')\n\n    a.forEach((v) => {\n      const parts = v.split('=')\n      const key   = decode(parts[0])\n      const m     = pattern.exec(key)\n\n      if (m) {\n        obj[m[1]]       = obj[m[1]] || []\n        obj[m[1]][m[2]] = decode(parts[1])\n        return\n      }\n\n      obj[parts[0]] = decode(parts[1] || '')\n    })\n\n    return obj || {}\n  }\n\n  doAlways(form) {\n    const that    = this\n    const dom     = that.dom\n    const $inputs = dom('input[type=\"file\"]', form)\n\n    setTimeout(() => {\n      // see safariQuirks\n      $inputs.prop('disabled', false)\n      that.isSubmitting = false\n    }, 200)\n  }\n\n  doFormSubmit(form, fd) {\n    const that = this\n\n    that.ajax({\n      type: 'POST',\n      mode: 'cors',\n      url: form.attr('action'),\n      data: fd\n    }).done((data, textStatus, jqXHR) => {\n      if (that.onDone) {\n        that.onDone(data, textStatus, jqXHR)\n      }\n    }).fail((jqXHR, textStatus, errorThrown) => {\n      if (that.onFail) {\n        that.onDone(jqXHR, textStatus, errorThrown)\n      }\n    }).always(() => {\n      that.doAlways(form)\n    })\n  }\n\n  initStripe(form) {\n    const that   = this\n    const opts   = that.opts\n    const win    = that.win\n    const stripe = win.Stripe\n    const style  = opts.stripeStyle\n    const elSel  = opts.stripeSelector || '#stripeElement'\n\n    if (typeof(stripe) === 'function') {\n      const stripeEl = dom(`#${elSel}`)\n      const key      = (stripeEl.data('key') || '').trim()\n\n      if (key.length > 2) {\n        that.stripe   = stripe(key);\n        that.elements = that.stripe.elements();\n\n        // Create an instance of the card Element\n        that.card = that.elements.create('card', {\n          style: style,\n          hidePostalCode: (opts.hidePostalCode || true)\n        })\n\n        // Add an instance of the card Element into div\n        that.card.mount(`#${elSel}`)\n\n        // Handle real-time validation errors from the card Element.\n        that.card.addEventListener('change', (e) => {\n          that.errs.stripe_client = null\n          that.errs.stripe_server = null\n          if (e.error) {\n            that.errs.stripe_client = e.error.message\n          }\n        })\n      }\n    }\n  }\n\n  /**\n   * https://stackoverflow.com/questions/51201011/ios-safari-fails-to-send-form-data-via-ajax/51273135\n   *\n   */\n  safariQuirks(form) {\n    const dom     = that.dom\n    const $inputs = dom('input[type=\"file\"]:not([disabled])', form)\n    $inputs.each((_, input) => {\n      if (input.files.length > 0) return\n      dom(input).prop('disabled', true)\n    })\n  }\n\n  init() {\n    const that   = this\n    const opts   = that.opts\n    const win    = that.win\n    const dom    = that.dom\n    const formId = opts.formId\n    const iQuery = win.location.href.indexOf('?')\n\n    // auto populate query string to form field\n    if (iQuery > 0) {\n      const vars = that.queryParseString(win.location.href.slice(iQuery + 1))\n\n      for(let k in vars) {\n        if (vars[k]) {\n          dom(`[name=\"${k}\"]`).val(vars[k])\n        }\n      }\n    }\n\n    // handle form submission with ajax\n    // status: \"success\", \"notmodified\", \"nocontent\", \"error\", \"timeout\", \"abort\", or \"parsererror\"\n    const doAjaxPost = (form) => {\n      // serialize form\n      that.safariQuirks(form)\n      const fd = new FormData(form)\n\n      // if no payment then simply submit\n      if (!that.card) {\n        return that.doFormSubmit(form, fd)\n      }\n\n      // otherwise, process stripe charge\n      const model = {}\n\n      // we use form serializeArray to provide better browser support\n      // as FormData is not compatible with many browsers\n      const fa    = form.serializeArray()\n\n      // convert to object\n      fa.forEach((value, key) => {\n        model[key] = value;\n      })\n\n      // compose payload for stripe\n      const ownerInfo = {\n        owner: {\n          name: model.first_name + ' ' + model.last_name,\n          address: {\n            line1: model.address1,\n            line2: model.address2,\n            city: model.city,\n            state: model.state,\n            postal_code: model.postal,\n            country: model.country\n          },\n          email: model.email\n        }\n      }\n\n      // send to stripe\n      that.stripe.createSource(that.card, ownerInfo)\n        .then((rsp) => {\n          let rst = that.handleStripeResponse(rsp)\n          if (rst) {\n            // append result to form data\n            for(let k in rst) {\n              fd.append(k, rst[k])\n            }\n\n            that.doFormSubmit(form, fd)\n          } else {\n            that.doAlways(form)\n          }\n        });\n    }\n\n    // get the first form\n    let form = dom(document.getElementsByClassName('form')[0])\n    if (formId) {\n      form = dom('#' + formId)\n    }\n\n    // handle form submit\n    form.on('submit', (e) => {\n      // prevent double submits\n      e.preventDefault()\n      if (that.isSubmitting) {\n        return false\n      }\n\n      that.validateAll(that, form)\n      that.validatePhone(that, form)\n      that.validateEmployment(that, form)\n\n      const errs  = that.errs\n      let isValid = that.errs.length <= 0\n\n      isValid = isValid && !errs.phone && !errs.amount && !errs.stripe_client && !errs.stripe_server\n      isValid = isValid && !errs.employer && !errs.occupation\n\n      if (isValid) {\n        that.isSubmitting = true\n\n        // find captcha input\n        const input = form.find('input[name=\"g-recaptcha-response\"]')\n\n        /* do something to prevent double submit, like disable submit button */\n        if (win.grecaptcha && input.length > 0) {\n          win.grecaptcha.ready(() => {\n            win.grecaptcha.execute(input.data('sitekey'), { action: (input.data('action') || form.attr('id')) })\n            .then((token) => {\n              input.val(token)\n              doAjaxPost(form)\n            })\n          });\n        } else {\n          doAjaxPost(form)\n        }\n      }\n\n      return false\n    })\n\n    // init strype\n    if (win.Stripe) {\n      that.initStripe(form)\n    }\n  }\n}\n\nexport default GcfClient\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n"],"sourceRoot":""}